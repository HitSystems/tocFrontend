{"version":3,"sources":["webpack:///./src/components/Tickets.vue","webpack:///./src/components/Tickets.vue?4fef","webpack:///./src/components/Tickets.vue?a697"],"names":["class","scope","style","total","toFixed","listaTickets","slice","reverse","item","index","key","setTicketActivo","_id","activo","moment","unix","timestamp","format","tipoPago","ticketInfo","ticket","imprimirTicket","type","name","setup","mounted","console","log","value","length","goTo","url","router","push","a","post","idTicket","then","arrayTickets","i","data","components","DetalleTicket","__exports__","render"],"mappings":"yPACSA,MAAM,O,uBACT,eAAM,sB,GACDA,MAAM,O,GACJA,MAAM,oB,GACJA,MAAM,S,uBAGP,eAAkC,MAA9BC,MAAM,OAAM,iBAAa,M,uBAC7B,eAAyB,MAArBA,MAAM,OAAM,QAAI,M,uBACpB,eAAkC,MAA9BA,MAAM,OAAM,iBAAa,M,GACzBA,MAAM,O,iBAQJC,MAAA,yB,SAYeF,MAAM,O,GAE9BA,MAAM,O,GACJA,MAAM,O,uBAKH,eAAkD,KAA/CA,MAAM,sCAAoC,Y,GAA7C,G,kHAtCZ,eA6BM,MA7BN,EA6BM,CA5BJ,EACA,eA0BM,MA1BN,EA0BM,CAzBJ,eAwBM,MAxBN,EAwBM,CAvBN,eAsBQ,QAtBR,EAsBQ,CArBN,eAOQ,cANN,eAKK,WAJH,EACA,EACA,EACA,eAAmD,KAAnD,EAAgB,UAAO,eAAE,EAAAG,MAAMC,QAAO,IAAK,MAAG,OAGlD,eAYQ,e,mBAXN,eAUK,2BAVuB,EAAAC,aAAaC,QAAQC,WAAO,SAA5CC,EAAMC,G,wBAAlB,eAUK,MAV8DC,IAAG,CAAED,SACvE,QAAK,mBAAE,EAAAE,gBAAgBH,IACjBR,MAAK,uCAA2BQ,EAAKI,MAAQ,EAAAC,U,CAEhD,eAAgD,KAAhD,EAAgD,eAAfL,EAAKI,KAAG,GACzC,eAEO,yBADH,EAAAE,OAAOC,KAAKP,EAAKQ,UAAS,KAASC,OAAM,2BAE7C,eAA0B,yBAApBT,EAAKU,UAAQ,GACnB,eAAoC,yBAA9BV,EAAKL,MAAMC,QAAO,IAAK,KAAE,I,yBAOtB,MAAV,EAAAe,Y,iBAAX,eAYM,MAZN,EAYM,CAXJ,eAAsC,GAAtBC,OAAQ,EAAAD,YAAU,mBAClC,eASM,MATN,EASM,CARJ,eAOM,MAPN,EAOM,CANF,eAKS,UAJR,QAAK,+BAAE,EAAAE,mBACRC,KAAK,SAAStB,MAAM,qE,6IAmBjB,G,UAAA,CACbuB,KAAM,OACNC,MAFa,WAGX,IAAMX,EAAS,eAAI,MACbV,EAAQ,eAAI,GACZE,EAAe,eAAI,IACnBc,EAAa,eAAI,MACT,iBAEd,SAASR,EAAgBS,GAAyB,IAAjBK,EAAiB,wDAC9CC,QAAQC,IAAIP,GACXK,IAASL,EAASf,EAAauB,MAAMvB,EAAauB,MAAMC,OAAO,IAClEV,EAAWS,MAAQR,EACnBP,EAAOe,MAAQR,EAAOR,IAGxB,SAASkB,EAAKC,GACZC,EAAA,KAAOC,KAAKF,GAGd,SAASV,IACa,MAAhBR,EAAOe,OACT,EAAAM,EAAMC,KAAK,2BAA4B,CAAEC,SAAUvB,EAAOe,QAC1DE,EAAK,MAELJ,QAAQC,IAAI,gCAchB,OAVA,gBAAU,WACR,EAAAO,EAAMC,KAAK,+BAA+BE,MAAK,SAACC,GAC9CnC,EAAMyB,MAAQ,EACd,IAAK,IAAIW,EAAI,EAAGA,EAAID,EAAaE,KAAKX,OAAQU,GAAK,EACjDpC,EAAMyB,OAASU,EAAaE,KAAKD,GAAGpC,MAEtCE,EAAauB,MAAQU,EAAaE,KAClC7B,EAAgB,IAAI,SAGjB,CACLmB,OACAzB,eACAM,kBACAE,SACAV,QACAW,OAAA,IACAK,aACAE,mBAIJoB,WAAY,CACRC,gBAAA,Q,iCCrGN,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,kCCTf,W","file":"js/chunk-9addcbf8.3bc89394.js","sourcesContent":["<template>\n    <div class=\"col\">\n      <br />\n      <div class=\"row\">\n        <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Número ticket</th>\n              <th scope=\"col\">Hora</th>\n              <th scope=\"col\">Forma de pago</th>\n              <th scope=\"col\">Total ({{total.toFixed(2)}} €)</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item, index) of listaTickets.slice().reverse()\" v-bind:key={index}\n            @click=\"setTicketActivo(item)\"\n            v-bind:class=\"{estiloActivoTicketCaja: item._id === activo}\"\n            >\n                <td style=\"text-align: center\">{{item._id}}</td>\n                <td>\n                  {{moment.unix(item.timestamp / 1000).format('DD/MM/YYYY hh:mm:ss')}}\n                  </td>\n                <td>{{item.tipoPago}}</td>\n                <td>{{item.total.toFixed(2)}} €</td>\n            </tr>\n          </tbody>\n        </table>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"ticketInfo != null\" class=\"col\">\n      <DetalleTicket :ticket=\"ticketInfo\" />\n      <div class='row'>\n        <div class=\"col\">\n            <button\n            @click=\"imprimirTicket()\"\n            type=\"button\" class=\"btn btn-secondary\n            botonesPrincipales w-100 btn-block botonesWidth\">\n                <i class=\"bi bi-printer-fill iconosBootstrap\"></i>\n            </button>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\nimport { ref, onMounted, computed } from 'vue';\nimport DetalleTicket from '@/components/DetalleTicket.vue';\nimport SalidaDinero from '@/components/SalidaDinero.vue';\nimport EntradaDinero from '@/components/EntradaDinero.vue';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { useStore } from 'vuex';\nimport router from '../router/index';\nimport { useToast } from 'vue-toastification';\n\nexport default {\n  name: 'Caja',\n  setup() {\n    const activo = ref(null);\n    const total = ref(0);\n    const listaTickets = ref([]);\n    const ticketInfo = ref(null);\n    const store = useStore();\n\n    function setTicketActivo(ticket, mounted = false) {\n        console.log(ticket);\n      if(mounted) ticket = listaTickets.value[listaTickets.value.length-1];\n      ticketInfo.value = ticket;\n      activo.value = ticket._id;\n    }\n\n    function goTo(url) {\n      router.push(url);\n    }\n\n    function imprimirTicket() {\n      if (activo.value != null) {\n        axios.post('impresora/imprimirTicket', { idTicket: activo.value });\n        goTo('/');\n      } else {\n        console.log('Primero selecciona un ticket');\n      }\n    }\n\n    onMounted(() => {\n      axios.post('tickets/getTicketsIntervalo').then((arrayTickets) => {\n        total.value = 0;\n        for (let i = 0; i < arrayTickets.data.length; i += 1) {\n          total.value += arrayTickets.data[i].total;\n        }\n        listaTickets.value = arrayTickets.data;\n        setTicketActivo('', true);\n      });\n    });\n    return {\n      goTo,\n      listaTickets,\n      setTicketActivo,\n      activo,\n      total,\n      moment,\n      ticketInfo,\n      imprimirTicket,\n    };\n    /* FINAL SETUP */\n  },\n  components: {\n      DetalleTicket,\n  }\n};\n</script>\n<style scoped>\n  .table-responsive {\n    height: 80vh;\n  }\n  .estiloActivoTicketCaja {\n    background-color:rgb(255, 221, 176) !important;\n  }\n  .iconosBootstrap {\n    font-size: 30px;\n  }\n  .botonesWidth {\n    width: 5vw;\n    border: solid black 1px;\n  }\n\n  .botonesPrincipales{\n    background-color: #fff5e9;\n    color: #c95907;\n    border-color: #bf5c18;\n    border-width: 3px;\n}\n</style>\n","import { render } from \"./Tickets.vue?vue&type=template&id=3a40c0cc&scoped=true\"\nimport script from \"./Tickets.vue?vue&type=script&lang=js\"\nexport * from \"./Tickets.vue?vue&type=script&lang=js\"\n\nimport \"./Tickets.vue?vue&type=style&index=0&id=3a40c0cc&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/santy/Trabajo/tocGame/tocFrontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3a40c0cc\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Tickets.vue?vue&type=style&index=0&id=3a40c0cc&scoped=true&lang=css\""],"sourceRoot":""}