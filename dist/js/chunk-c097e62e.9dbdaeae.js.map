{"version":3,"sources":["webpack:///./src/components/Fichajes.vue","webpack:///./src/components/Fichajes.vue?5764","webpack:///./src/components/Fichajes.vue?b602"],"names":["class","style","id","tabindex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","value","scope","href","abrirModal","consumoPersonal","inputBusqueda","placeholder","buscar","actualizarLista","idPlanificacion","arrayPlanes","item","index","key","idPlan","turno","arrayTrabajadores","trabajador","nombre","fichado","undefined","fichar","desfichar","name","setup","store","modalFichajes","toast","test","console","log","actualizarTurnos","then","show","err","cerrarModal","hide","a","post","busqueda","res","data","get","resPlanes","error","info","mensaje","idTrabajador","success","dispatch","router","push","document","getElementById","keyboard","watch","this","length","__exports__","render"],"mappings":"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","file":"js/chunk-c097e62e.9dbdaeae.js","sourcesContent":["<template>\r\n    <div class=\"row\">\r\n        <div class='col-md-6 ms-3 mt-3'>\r\n            <div class='row ms-3'>\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-door-open\"></i></span>\r\n                        <a href=\"#\" class=\"btn btn-primary\" @click=\"abrirModal()\">Fichaje</a>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"card cardWidth\">\r\n                    <div class=\"card-body\" style='text-align: center;'>\r\n                        <span><i class=\"bi bi-cup-straw\"></i></span>\r\n                        <button @click=\"consumoPersonal()\" class=\"btn btn-primary\">Consumo personal</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- <div class=\"row mt-2\">\r\n        <div class=\"col text-center\">\r\n            <span class=\"tituloFichajes\">Fichajes del d√≠a 01/02/2022</span>\r\n            <table class=\"table table-striped mx-auto\" style=\"width: 50%\">\r\n            <thead>\r\n                <tr>\r\n                <th scope=\"col\">Nombre</th>\r\n                <th scope=\"col\">Entrada</th>\r\n                <th scope=\"col\">Salida</th>\r\n                <th scope=\"col\">Turno seleccionado</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n                <tr>\r\n                    <th>Miguel</th>\r\n                    <td>08:01</td>\r\n                    <td>16:00</td>\r\n                    <td>6:00 a 14:00h</td>\r\n                </tr>\r\n            </tbody>\r\n            </table>\r\n        </div>\r\n    </div> -->\r\n\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"modalFichajes\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\" style=\"max-width: 700px\">\r\n            <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLabel\">Fichaje</h5>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"row\">\r\n                    <input v-model=\"inputBusqueda\" class=\"form-control\" style=\"width: 350px; height: 50px; font-size: 20px\" type=\"text\" placeholder=\"Introduce tu nombre\">\r\n                    <button type=\"button\" style=\"width: 100px\" class=\"btn btn-primary ms-2\" @click=\"buscar()\">Buscar</button>\r\n                    <button type=\"button\" style=\"width: 200px\" class=\"btn btn-warning ms-2\" @click=\"actualizarLista()\">Actualizar lista</button>\r\n                    <div class=\"row mt-2\">\r\n                        <select v-model=\"idPlanificacion\" class=\"form-select\" style=\"height: 50px; font-size: 20px\">\r\n                            <option value=\"SIN_TURNO\">Sin turno</option>\r\n                            <option v-for=\"(item, index) in arrayPlanes\" :key=\"index\" :value=\"arrayPlanes[index].idPlan\">{{arrayPlanes[index].turno}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"row mt-2\">\r\n                        <div class=\"table\" style=\"height: 400px;\">\r\n                            <table class=\"table table-striped\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th scope=\"col\">Nombre</th>\r\n                                        <th scope=\"col\">Fichar/Desfichar</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    <tr v-for=\"(trabajador, index) of arrayTrabajadores\" v-bind:key=\"index\">\r\n                                        <td>{{trabajador.nombre}}</td>\r\n                                        <td v-if=\"trabajador.fichado === false || trabajador.fichado == undefined\"><a href=\"#\" style=\"width: 150px\" class=\"btn btn-outline-primary btn_fc\" @click=\"fichar(trabajador, index)\">FICHAR</a></td>\r\n                                        <td v-else><a href=\"#\" style=\"width: 150px\" class=\"btn btn-outline-success btn_fc\" @click=\"desfichar(trabajador, index)\">DESFICHAR</a></td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-danger btn-lg\" data-bs-dismiss=\"modal\">Cerrar</button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport { Modal } from 'bootstrap';\r\nimport { onMounted, ref, watch } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport router from '../router/index';\r\nimport { useToast } from 'vue-toastification';\r\n\r\nexport default {\r\n    name: 'Dependientas',\r\n    setup() {\r\n        const store = useStore();\r\n        const idPlanificacion = ref('SIN_TURNO');\r\n        const nombre = 'Santy';\r\n        const id = 156;\r\n        let modalFichajes = null;\r\n        const arrayTrabajadores = ref([]);\r\n        const inputBusqueda = ref('');\r\n        const toast = useToast();\r\n        const arrayPlanes = ref([]);\r\n\r\n        function test() {\r\n            console.log(\"El selected es: \", idPlanificacion.value);\r\n        }\r\n\r\n        function abrirModal() {\r\n            actualizarTurnos().then(() => {\r\n                modalFichajes.show();\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                modalFichajes.show();\r\n            });            \r\n        }\r\n\r\n        function cerrarModal() {\r\n            modalFichajes.hide();\r\n        }\r\n\r\n        function buscar() {\r\n            axios.post('trabajadores/buscar', { busqueda: inputBusqueda.value }).then((res) => {\r\n                arrayTrabajadores.value = res.data;\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function actualizarTurnos() {\r\n            return axios.get('turnos/getPlanes').then((resPlanes) => {\r\n                if (resPlanes.data.error == false) {\r\n                    arrayPlanes.value = resPlanes.data.info;\r\n                } else {\r\n                    toast.error(resPlanes.data.mensaje);\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                toast.error('Error frontend catch: axios turnos/getPlanes');\r\n            });\r\n        }\r\n\r\n        function fichar(trabajador, index) {\r\n            axios.post('trabajadores/fichar', { idTrabajador: trabajador.idTrabajador, idPlan: idPlanificacion.value }).then((res) => {\r\n                if (!res.data.error) {\r\n                    arrayTrabajadores.value[index].fichado = true;\r\n                    actualizarTurnos();\r\n                    idPlanificacion.value = 'SIN_TURNO';\r\n                    cerrarModal();\r\n                } else {\r\n                    console.log(res.data.mensaje);\r\n                    arrayTrabajadores.value[index].fichado = false;\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function actualizarLista() {\r\n            axios.post('trabajadores/actualizarTrabajadores').then((res) => {\r\n                if (res.data.error == false) {\r\n                    toast.success('Trabajadores actualizados');\r\n                } else {\r\n                    toast.error(res.data.mensaje);\r\n                }\r\n            });\r\n        }\r\n\r\n        function desfichar(trabajador, index) {\r\n            axios.post('trabajadores/desfichar', { idTrabajador: trabajador.idTrabajador }).then((res) => {\r\n                if (!res.data.error) {\r\n                    console.log('Trabajador desfichado');\r\n                    arrayTrabajadores.value[index].fichado = false;\r\n                } else {\r\n                    console.log('Error al desfichar');\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        function consumoPersonal() {\r\n            store.dispatch('setModoActual', 'CONSUMO PERSONAL');\r\n            store.dispatch('Footer/setMenuActivo', 1);\r\n            router.push('/');\r\n        }\r\n\r\n        onMounted(() => {\r\n            modalFichajes = new Modal(document.getElementById('modalFichajes'), {\r\n                keyboard: false,\r\n            });\r\n            axios.get('turnos/getPlanes').then((res) => {\r\n                if (res.data.error == false) {\r\n                    arrayPlanes.value = res.data.info;\r\n                } else {\r\n                    toast.error(res.data.mensaje);\r\n                }\r\n            }).catch((err) => {\r\n                console.log(err);\r\n                toast.error('Error frontend catch: axios turnos/getPlanes');\r\n            });\r\n        });\r\n\r\n        return {\r\n            test,\r\n            arrayPlanes,\r\n            idPlanificacion,\r\n            actualizarLista,\r\n            consumoPersonal,\r\n            fichar,\r\n            desfichar,\r\n            inputBusqueda,\r\n            arrayTrabajadores,\r\n            buscar,\r\n            cerrarModal,\r\n            abrirModal,\r\n            nombre,\r\n            id,\r\n        };\r\n    },\r\n    watch: {\r\n        inputBusqueda: function () {\r\n            if (this.inputBusqueda.length >= 3) {\r\n                this.buscar();\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style scoped>\r\n    .cardWidth {\r\n       width: 10rem;\r\n       margin: 5px;\r\n    }\r\n    span i {\r\n        font-size: 5rem;\r\n    }\r\n    .tituloFichajes {\r\n        font-size: 1.5rem;\r\n        text-transform: uppercase;\r\n        font-weight: bold;\r\n    }\r\n</style>\r\n","import { render } from \"./Fichajes.vue?vue&type=template&id=ebb11f8e&scoped=true\"\nimport script from \"./Fichajes.vue?vue&type=script&lang=js\"\nexport * from \"./Fichajes.vue?vue&type=script&lang=js\"\n\nimport \"./Fichajes.vue?vue&type=style&index=0&id=ebb11f8e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Eze\\\\Documents\\\\GitHub\\\\tocFrontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ebb11f8e\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Fichajes.vue?vue&type=style&index=0&id=ebb11f8e&scoped=true&lang=css\""],"sourceRoot":""}