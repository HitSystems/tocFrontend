(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67f2115e"],{"0cfc":function(t,e,a){t.exports=a.p+"img/uneuro.d4d09342.png"},"0e5e":function(t,e,a){t.exports=a.p+"img/img-tarjetas.6adf4bbd.png"},"100f":function(t,e,a){t.exports=a.p+"img/1cts.08f9a496.png"},1091:function(t,e,a){t.exports=a.p+"img/10euros.71677dd3.png"},1135:function(t,e,a){t.exports=a.p+"img/20euros.d0df58ee.png"},2888:function(t,e,a){t.exports=a.p+"img/5euros.4a15401a.png"},"2b6f":function(t,e,a){t.exports=a.p+"img/loading.3a59a19e.gif"},"41ef":function(t,e,a){t.exports=a.p+"img/50euros.de313b3c.png"},"54ab":function(t,e,a){t.exports=a.p+"img/img-efectivo-disabled.aabb57ee.png"},"9e6f":function(t,e,a){t.exports=a.p+"img/img-restaurant.96084bf3.png"},a340:function(t,e,a){t.exports=a.p+"img/doseuros.920ccd20.png"},a7d3:function(t,e,a){t.exports=a.p+"img/100euros.2f9cefba.png"},b9b8:function(t,e,a){t.exports=a.p+"img/10cts.aecf0c2d.png"},c05b:function(t,e,a){t.exports=a.p+"img/500euros.db40467f.png"},ca37:function(t,e,a){"use strict";a("e1a0")},cc03:function(t,e,a){t.exports=a.p+"img/5cts.1ad0ba13.png"},cdaf:function(t,e,a){t.exports=a.p+"img/img-3g-disabled.fa7f90d7.png"},cff6:function(t,e,a){t.exports=a.p+"img/200euros.594db7de.png"},d348:function(t,e,a){t.exports=a.p+"img/img-3g.f0f80a8c.png"},d68e:function(t,e,a){t.exports=a.p+"img/50cts.a9507b29.png"},d69f:function(t,e,a){t.exports=a.p+"img/img-efectivo.0a3202b8.png"},e1a0:function(t,e,a){},ea88:function(t,e,a){t.exports=a.p+"img/img-tarjetas-disabled.b2f9a319.png"},edb7:function(t,e,a){t.exports=a.p+"img/20cts.f25065eb.png"},fbdc:function(t,e,a){"use strict";a.r(e);var o=a("7a23");function n(t,e,a,n,c,r){var s=Object(o["F"])("CobroComponent");return Object(o["x"])(),Object(o["e"])(s)}a("b680"),a("a9e3");var c=a("100f"),r=a.n(c),s=a("fbdd"),l=a.n(s),i=a("cc03"),u=a.n(i),b=a("b9b8"),d=a.n(b),g=a("edb7"),f=a.n(g),p=a("d68e"),h=a.n(p),m=a("0cfc"),j=a.n(m),O=a("a340"),v=a.n(O),C=a("2888"),k=a.n(C),T=a("1091"),x=a.n(T),w=a("1135"),E=a.n(w),A=a("41ef"),y=a.n(A),z=a("a7d3"),M=a.n(z),P=a("cff6"),I=a.n(P),F=a("c05b"),N=a.n(F),R=a("d69f"),B=a.n(R),V=a("54ab"),D=a.n(V),J=a("0e5e"),S=a.n(J),G=a("ea88"),K=a.n(G),L=a("d348"),_=a.n(L),U=a("cdaf"),X=a.n(U),H=a("9e6f"),Y=a.n(H),q=a("2b6f"),Q=a.n(q),W=function(t){return Object(o["A"])("data-v-c7653750"),t=t(),Object(o["y"])(),t},Z={class:"container-fluid mt-2"},$={class:"row"},tt={class:"col-md-12 text-center"},et=["width"],at=["width"],ot=["width"],nt=["width"],ct=["width"],rt=["width"],st=["width"],lt=["width"],it={class:"row"},ut={class:"col-md-12 text-center"},bt=["width"],dt=["width"],gt=["width"],ft=["width"],pt=["width"],ht=["width"],mt=["width"],jt={class:"row"},Ot={class:"col-md-7"},vt={class:"row"},Ct={class:"col",style:{"max-width":"325px"}},kt={class:"btn-group-vertical",role:"group"},Tt={class:"btn-group"},xt={class:"btn-group"},wt={class:"btn-group"},Et={class:"btn-group"},At={class:"col-md-6 pt-2 text-start colorTexto"},yt={style:{"font-size":"32px"},class:"fw-bold"},zt=W((function(){return Object(o["h"])("br",null,null,-1)})),Mt={style:{"font-size":"32px"},class:"fw-bold"},Pt=W((function(){return Object(o["h"])("br",null,null,-1)})),It={style:{"font-size":"32px"},class:"fw-bold"},Ft=W((function(){return Object(o["h"])("br",null,null,-1)})),Nt={key:0,class:"fw-bold",style:{"font-size":"32px",color:"red"}},Rt={key:1,class:"fw-bold",style:{"font-size":"32px",color:"green"}},Bt={class:"col-md-5"},Vt={key:0,class:"row"},Dt={class:"col-md-4 text-center"},Jt={class:"col-md-4 text-center"},St={class:"col-md-4 text-center"},Gt=W((function(){return Object(o["h"])("div",{class:"row mt-2"},[Object(o["h"])("div",{class:"col text-center"},[Object(o["h"])("img",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",src:Y.a,alt:"tkrs",width:"185"})])],-1)})),Kt=W((function(){return Object(o["h"])("div",{class:"col text-center"},[Object(o["h"])("img",{src:Q.a,alt:"Esperando respuesta del datáfono"})],-1)})),Lt=[Kt],_t={class:"position-absolute bottom-0 start-0 mb-2",style:{position:"absolute"}},Ut={class:"btn-group",role:"group","aria-label":"First group"},Xt={class:"position-absolute bottom-0 end-0 mb-2 me-2"},Ht={class:"col-md-12 text-center"},Yt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qt={class:"modal-dialog"},Qt={class:"modal-content"},Wt=W((function(){return Object(o["h"])("div",{class:"modal-header"},[Object(o["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"Importe del ticket restaurant"),Object(o["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),Zt={class:"modal-body"},$t={class:"input-group mb-3"},te=W((function(){return Object(o["h"])("span",{class:"input-group-text"},"Cantidad",-1)})),ee={class:"modal-footer"},ae=W((function(){return Object(o["h"])("button",{type:"button",class:"btn btn-secondary btn-lg","data-bs-dismiss":"modal"},"Cerrar",-1)}));function oe(t,e,a,n,c,s){return Object(o["x"])(),Object(o["g"])(o["a"],null,[Object(o["h"])("div",Z,[Object(o["h"])("div",$,[Object(o["h"])("div",tt,[Object(o["h"])("img",{onClick:e[0]||(e[0]=function(t){return n.agregar(.01)}),src:r.a,alt:"Moneda 1 cts.",width:n.sizeMonedas},null,8,et),Object(o["h"])("img",{onClick:e[1]||(e[1]=function(t){return n.agregar(.02)}),src:l.a,alt:"Moneda 2 cts.",width:n.sizeMonedas,class:"mr-2"},null,8,at),Object(o["h"])("img",{onClick:e[2]||(e[2]=function(t){return n.agregar(.05)}),src:u.a,alt:"Moneda 5 cts.",width:n.sizeMonedas,class:"mr-2"},null,8,ot),Object(o["h"])("img",{onClick:e[3]||(e[3]=function(t){return n.agregar(.1)}),src:d.a,alt:"Moneda 10 cts.",width:n.sizeMonedas,class:"mr-2"},null,8,nt),Object(o["h"])("img",{onClick:e[4]||(e[4]=function(t){return n.agregar(.2)}),src:f.a,alt:"Moneda 20 cts.",width:n.sizeMonedas,class:"mr-2"},null,8,ct),Object(o["h"])("img",{onClick:e[5]||(e[5]=function(t){return n.agregar(.5)}),src:h.a,alt:"Moneda 50 cts.",width:n.sizeMonedas,class:"mr-2"},null,8,rt),Object(o["h"])("img",{onClick:e[6]||(e[6]=function(t){return n.agregar(1)}),src:j.a,alt:"Moneda 1 euro",width:n.sizeMonedas,class:"mr-2"},null,8,st),Object(o["h"])("img",{onClick:e[7]||(e[7]=function(t){return n.agregar(2)}),src:v.a,alt:"Moneda 2 euros",width:n.sizeMonedas,class:"mr-2"},null,8,lt)])]),Object(o["h"])("div",it,[Object(o["h"])("div",ut,[Object(o["h"])("img",{onClick:e[8]||(e[8]=function(t){return n.agregar(5)}),src:k.a,alt:"Billete 5 euros",width:n.sizeBilletes},null,8,bt),Object(o["h"])("img",{onClick:e[9]||(e[9]=function(t){return n.agregar(10)}),src:x.a,alt:"Billete 10 euros",width:n.sizeBilletes,class:"p-2"},null,8,dt),Object(o["h"])("img",{onClick:e[10]||(e[10]=function(t){return n.agregar(20)}),src:E.a,alt:"Billete 20 euros",width:n.sizeBilletes,class:"p-2"},null,8,gt),Object(o["h"])("img",{onClick:e[11]||(e[11]=function(t){return n.agregar(50)}),src:y.a,alt:"Billete 50 euros",width:n.sizeBilletes,class:"p-2"},null,8,ft),Object(o["h"])("img",{onClick:e[12]||(e[12]=function(t){return n.agregar(100)}),src:M.a,alt:"Billete 100 euros",width:n.sizeBilletes,class:"p-2"},null,8,pt),Object(o["h"])("img",{onClick:e[13]||(e[13]=function(t){return n.agregar(200)}),src:I.a,alt:"Billete 200 euros",width:n.sizeBilletes,class:"p-2"},null,8,ht),Object(o["h"])("img",{onClick:e[14]||(e[14]=function(t){return n.agregar(500)}),src:N.a,alt:"Billete 500 euros",width:n.sizeBilletes,class:"p-2"},null,8,mt)])]),Object(o["h"])("div",jt,[Object(o["h"])("div",Ot,[Object(o["h"])("div",vt,[Object(o["h"])("div",Ct,[Object(o["h"])("div",kt,[Object(o["h"])("div",Tt,[Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[15]||(e[15]=function(t){return n.agregarTecla("7")})},"7"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[16]||(e[16]=function(t){return n.agregarTecla("8")})},"8"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[17]||(e[17]=function(t){return n.agregarTecla("9")})},"9")]),Object(o["h"])("div",xt,[Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[18]||(e[18]=function(t){return n.agregarTecla("4")})},"4"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[19]||(e[19]=function(t){return n.agregarTecla("5")})},"5"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[20]||(e[20]=function(t){return n.agregarTecla("6")})},"6")]),Object(o["h"])("div",wt,[Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[21]||(e[21]=function(t){return n.agregarTecla("1")})},"1"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[22]||(e[22]=function(t){return n.agregarTecla("2")})},"2"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[23]||(e[23]=function(t){return n.agregarTecla("3")})},"3")]),Object(o["h"])("div",Et,[Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[24]||(e[24]=function(t){return n.borrarCuentas()})},"C"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[25]||(e[25]=function(t){return n.agregarTecla("0")})},"0"),Object(o["h"])("a",{class:"botonEze botonesCalculadora",onClick:e[26]||(e[26]=function(t){return n.agregarComa(".")})},",")])])]),Object(o["h"])("div",At,[Object(o["h"])("span",yt," Total: "+Object(o["I"])(Number(n.total).toFixed(2))+" € ",1),zt,Object(o["h"])("span",Mt," Dinero recibido: "+Object(o["I"])(n.cuenta+n.totalTkrs)+" € ",1),Pt,Object(o["h"])("span",It," Ticket Restaurant: "+Object(o["I"])(n.totalTkrs)+" € ",1),Ft,n.faltaOSobra?(Object(o["x"])(),Object(o["g"])("span",Nt," Faltan: "+Object(o["I"])(n.total-(n.totalTkrs+n.cuenta))+" € ",1)):(Object(o["x"])(),Object(o["g"])("span",Rt," Sobran: "+Object(o["I"])(n.sobranX.toFixed(2))+" € ",1))])])]),Object(o["h"])("div",Bt,[!1===n.esVIP&&!1===n.esDevolucion&&!1===n.esConsumoPersonal&&n.botonesCobroActivo&&!1===n.tkrs?(Object(o["x"])(),Object(o["g"])("div",Vt,[Object(o["h"])("div",Dt,["EFECTIVO"==n.metodoPagoActivo?(Object(o["x"])(),Object(o["g"])("img",{key:0,onClick:e[27]||(e[27]=function(t){return n.setMetodoPago("EFECTIVO")}),src:B.a,alt:"Cobrar con efectivo",width:"185"})):(Object(o["x"])(),Object(o["g"])("img",{key:1,onClick:e[28]||(e[28]=function(t){return n.setMetodoPago("EFECTIVO")}),src:D.a,alt:"Cobrar con efectivo",width:"185"}))]),Object(o["h"])("div",Jt,["TARJETA"==n.metodoPagoActivo?(Object(o["x"])(),Object(o["g"])("img",{key:0,onClick:e[29]||(e[29]=function(t){return n.setMetodoPago("TARJETA")}),src:S.a,alt:"Cobrar con tarjeta",width:"185"})):(Object(o["x"])(),Object(o["g"])("img",{key:1,onClick:e[30]||(e[30]=function(t){return n.setMetodoPago("TARJETA")}),src:K.a,alt:"Cobrar con tarjeta",width:"185"}))]),Object(o["h"])("div",St,["TARJETA 3G"==n.metodoPagoActivo?(Object(o["x"])(),Object(o["g"])("img",{key:0,onClick:e[31]||(e[31]=function(t){return n.setMetodoPago("TARJETA 3G")}),src:_.a,alt:"Cobrar con tarjeta",width:"185"})):(Object(o["x"])(),Object(o["g"])("img",{key:1,onClick:e[32]||(e[32]=function(t){return n.setMetodoPago("TARJETA 3G")}),src:X.a,alt:"Cobrar con tarjeta",width:"185"}))])])):Object(o["f"])("",!0),Gt,Object(o["h"])("div",{class:Object(o["r"])(["row mt-2",{datafonoEsperando:!n.esperando}])},Lt,2)])])]),Object(o["h"])("div",_t,[Object(o["h"])("div",Ut,[Object(o["h"])("button",{type:"button",onClick:e[33]||(e[33]=function(t){return n.volver()}),class:"btn btn-warning ms-2 botonesPrincipales"},"Volver"),Object(o["h"])("button",{type:"button",onClick:e[34]||(e[34]=function(t){return n.reset()}),class:"btn btn-danger ms-2 botonesPrincipales"},"Reset ")])]),Object(o["h"])("div",Xt,[Object(o["h"])("div",Ht,[Object(o["h"])("button",{onClick:e[35]||(e[35]=function(t){return n.cobrar()}),class:"btn btn-secondary w-100 totalStyle botonCobrar menusColorIvan"}," Cobrar "+Object(o["I"])(n.cobrarVariable)+" € ",1)])]),Object(o["h"])("div",Yt,[Object(o["h"])("div",qt,[Object(o["h"])("div",Qt,[Wt,Object(o["h"])("div",Zt,[Object(o["h"])("div",$t,[te,Object(o["R"])(Object(o["h"])("input",{type:"number","onUpdate:modelValue":e[36]||(e[36]=function(t){return n.totalTkrs=t}),class:"form-control",style:{"font-size":"45px"}},null,512),[[o["N"],n.totalTkrs]])])]),Object(o["h"])("div",ee,[ae,Object(o["h"])("button",{type:"button",class:"btn btn-primary btn-lg","data-bs-dismiss":"modal",onClick:e[37]||(e[37]=function(t){return n.configurarCantidad()})},"Aceptar")])])])])],64)}a("ac1f"),a("5319");var ne=a("bc3a"),ce=a.n(ne),re=a("5502"),se=a("6c02"),le=a("0180"),ie=a("a18c"),ue=a("799c"),be={name:"CobroComponent",setup:function(){var t=Object(le["b"])(),e=Object(se["c"])(),a=Object(re["b"])(),n=e.params.total,c=(a.getters["getModoActual"],a.getters["Clientes/getInfoCliente"]),r="100",s="150",l=!1,i=!1,u=!1,b=!0,d=Object(o["C"])(!1),g=Object(o["C"])(0),f=Object(o["C"])(0),p=Object(o["C"])("EFECTIVO"),h=Object(o["C"])(0),m=Object(o["C"])(0),j=Object(o["C"])([]),O=Object(o["c"])((function(){return a.state.esperandoDatafono})),v=Object(o["c"])((function(){return a.state.Cesta.cesta._id}));function C(){g.value=0,f.value=0,h.value=0,m.value=0}function k(t){console.log(t),f.value=String(Number(f.value+t))}function T(){ie["a"].push("/")}function x(){d.value?h.value="".concat(h.value.replace(".",""),"."):f.value="".concat(f.value.replace(".",""),".")}function w(t){h.value=t}function E(){var t=Number(h.value);t>0?w(t):console.log("Importe ticket restaurant incorrecto")}function A(t){g.value+=t}function y(){d.value?(d.value=!1,p.value="EFECTIVO"):(p.value="TICKET_RESTAURANT",d.value=!0)}function z(){h.value=0,g.value=0,f.value=0}function M(t){p.value=t}var P=Object(o["c"])((function(){return n-h.value<=0?0:(n-h.value).toFixed(2).replace(".",",")})),I=Object(o["c"])((function(){return d.value?n-h.value?(b=!0,m.value+h.value+n):(b=!1,m.value):m.value+h.value-n})),F=Object(o["c"])((function(){return m.value+h.value-n<0})),N=Object(o["P"])((function(){m.value=g.value})),R=Object(o["P"])((function(){m.value=Number(f.value)}));function B(t){a.dispatch("setEsperandoDatafono",t)}function V(){if(!O.value)if(h.value>0){var e={total:Number(n),totalTkrs:h.value,idCesta:v.value,idCliente:c};ce.a.post("tickets/crearTicketTKRS",e).then((function(e){if(e.data.error)t.error("Error al insertar el ticket.");else{C();try{ce.a.post("impresora/abrirCajon")}catch(a){t.error("No se ha podido abrir el cajón.")}t.success("Ticket OK"),ie["a"].push("/")}}))["catch"]((function(e){console.log(e),t.error("Error")}))}else"EFECTIVO"===p.value&&(console.log(v.value),ce.a.post("tickets/crearTicketEfectivo",{total:Number(n),idCesta:v.value,idCliente:c}).then((function(e){if(e.data.error)t.error("Error al insertar el ticket");else{C();try{ce.a.post("impresora/abrirCajon")}catch(a){t.error("No se ha podido abrir el cajón")}t.success("Ticket OK"),ie["a"].push("/")}}))["catch"]((function(e){console.log(e),t.error("Error")}))),"TARJETA 3G"===p.value&&(console.log(v.value),ce.a.post("tickets/crearTicketDatafono3G",{total:Number(n),idCesta:v.value,idCliente:c}).then((function(e){e.data.error?t.error("Error al insertar el ticket"):(C(),ie["a"].push({name:"Home",params:{tipoToast:"success",mensajeToast:"Ticket creado"}}))}))["catch"]((function(e){console.log(e),t.error("Error")}))),"TARJETA"===p.value&&ce.a.post("parametros/getParametros").then((function(e){void 0!=e.data.parametros||null!=e.data.parametros?"CLEARONE"==e.data.parametros.tipoDatafono?(Object(ue["a"])("enviarAlDatafono",{total:Number(n),idCesta:v.value,idClienteFinal:c}),B(!0)):"PAYTEF"==e.data.parametros.tipoDatafono&&(B(!0),ce.a.post("paytef/iniciarTransaccion",{cantidad:Number(n),idCesta:v.value,idClienteFinal:c}).then((function(e){1==e.data.error?t.error(e.data.mensaje):Object(ue["a"])("polling",{cantidad:Number(n),idCesta:v.value,idClienteFinal:c})}))["catch"]((function(e){console.log(e),t.error("Error POST iniciarTransaccion")}))):t.error("Datáfono no definido en los parámetros")}))["catch"]((function(e){console.log(e),t.error("Error de getParametros datáfono")}))}function C(){a.dispatch("Cesta/setIdAction",-1),a.dispatch("setModoActual","NORMAL"),a.dispatch("Clientes/resetClienteActivo"),a.dispatch("Footer/resetMenuActivo"),ce.a.post("promociones/setEstadoPromociones",{estadoPromociones:!0})}function D(){console.log("test vacío")}return Object(o["v"])((function(){ce.a.post("/trabajadores/getTrabajadoresFichados").then((function(t){t.data.error?console.log("Error!"):t.data.res.length>0?console.log(t.data.res):console.log("No hay trabajadores fichados")}))["catch"]((function(t){console.log(t)}))})),{test:D,total:n,sizeBilletes:s,sizeMonedas:r,esVIP:l,esDevolucion:i,esConsumoPersonal:u,botonesCobroActivo:b,tkrs:d,agregarTecla:k,agregarComa:x,agregar:A,cobrarVariable:P,sobranX:I,faltaOSobra:F,cuentaAsistente:N,cuentaAsistenteTeclado:R,cuenta:m,totalTkrs:h,borrarCuentas:z,setMetodoPago:M,metodoPagoActivo:p,alternarTkrs:y,configurarCantidad:E,reset:C,arrayFichados:j,volver:T,cobrar:V,esperando:O}}},de=(a("ca37"),a("d959")),ge=a.n(de);const fe=ge()(be,[["render",oe],["__scopeId","data-v-c7653750"]]);var pe=fe,he={name:"Cobro",components:{CobroComponent:pe}};const me=ge()(he,[["render",n]]);e["default"]=me},fbdd:function(t,e,a){t.exports=a.p+"img/2cts.b4040beb.png"}}]);
//# sourceMappingURL=chunk-67f2115e.70bc1550.js.map